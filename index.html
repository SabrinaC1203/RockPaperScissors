<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Functions</title>

  </head>
  <body>
    <button id="playButton">Play Round</button>
    <p>Player Score: <span id="humanScore">0</span></p>
    <p>Computer Score: <span id="computerScore">0</span></p>
    <pre id="log"></pre>

    <script>
    let humanScore = 0;
    let computerScore = 0;
    let round = 0;

    const playButton = document.querySelector("#playButton");
    const playerScoreDisplay = document.querySelector("#humanScore");
    const computerScoreDisplay = document.querySelector("#computerScore");
    const log = document.querySelector("#log");

    function getHumanChoice() {
        const input = prompt("Rock, Paper or Scissors?");
        if (!input) return null;
        return input.trim().toLowerCase();
    }

    function getComputerChoice() {
        const options = ["rock", "paper", "scissors"];
        const randomChoice = Math.floor(Math.random() * options.length);
        return options [randomChoice];
}

    function playRound(player, computer){
        if (player === computer) return "tie";
        if (
            (player === "rock" && computer === "scissors") ||
            (player === "paper" && computer === "rock") ||
            (player === "scissors" && computer === "paper") 
        ) {
            return "player";
        }
        return "computer";
    }

    function updateScores(winner) {
        if (winner === "player") {
            humanScore++;
            playerScoreDisplay.textContent = humanScore;
        } else if (winner === "computer") {
            computerScore++;
            computerScoreDisplay.textContent = computerScore;
        }
    }

    function logRound(player, computer, winner) {
        log.textContent += `You chose: ${player}\n`;
        log.textContent += `Computer chose: ${computer}\n`;
        if (winner === "tie"){
            log.textContent += "It's a tie !\n\n";
        } else if (winner === "player") {
            log.textContent += "You win this round\n\n";
        } else {
            log.textContent += "Computer wins this round!\n\n";
        }
    }

    function declareFinalWinner() {
        if (humanScore > computerScore){
            log.textContent += "Game over ! You win. Refresh the page to play again.\n"
        } else if (computerScore > humanScore) {
            log.textContent += "Game over ! Computer wins. Refresh the page to try again.\n"
        } else {
            log.textContent += "Game over ! It's a tie! Refresh the page to try again.\n"
        }
    }

    function letsPlay() {
        if (round >= 5){
            return;
        }
        const player = getHumanChoice();
        if (!player || !["rock", "paper", "scissors"].includes(player)){
            log.textContent += "Invalid or canceled input.";
            return;
        }

        const computer = getComputerChoice();
        const winner = playRound(player, computer);

        updateScores(winner);
        logRound(player, computer, winner);

        round++;

        if (round === 5) {
            declareFinalWinner();
            playButton.disabled = true;
        }
    }
    playButton.addEventListener("click", letsPlay);

    </script>
  </body>
</html>