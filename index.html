<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Functions</title>

  </head>
  <body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <p>Player Score: <span id="humanScore">0</span></p>
    <p>Computer Score: <span id="computerScore">0</span></p>
    <pre id="log"></pre>

    <script>
    let humanScore = 0;
    let computerScore = 0;
    let round = 0;

    const playRock = document.querySelector("#rock");
    const playPaper = document.querySelector("#paper");
    const playScissors = document.querySelector("#scissors");
    const playerScoreDisplay = document.querySelector("#humanScore");
    const computerScoreDisplay = document.querySelector("#computerScore");
    const log = document.querySelector("#log");

    function getHumanChoice() {
        const playerOptions =[playPaper, playRock, playScissors];
        
        playerOptions.forEach(button => {
            button.addEventListener("click", () => {
                const input = button.id;
            })
        })
    }

    function getComputerChoice() {
        const options = ["rock", "paper", "scissors"];
        const randomChoice = Math.floor(Math.random() * options.length);
        return options [randomChoice];
}

    function playRound(player, computer){
        if (player === computer) return "tie";
        if (
            (player === "rock" && computer === "scissors") ||
            (player === "paper" && computer === "rock") ||
            (player === "scissors" && computer === "paper") 
        ) {
            return "player";
        }
        return "computer";
    }

    function updateScores(winner) {
        if (winner === "player") {
            humanScore++;
            playerScoreDisplay.textContent = humanScore;
        } else if (winner === "computer") {
            computerScore++;
            computerScoreDisplay.textContent = computerScore;
        }
    }

    function logRound(player, computer, winner) {
        log.textContent += `You chose: ${player}\n`;
        log.textContent += `Computer chose: ${computer}\n`;
        if (winner === "tie"){
            log.textContent += "It's a tie !\n\n";
        } else if (winner === "player") {
            log.textContent += "You win this round\n\n";
        } else {
            log.textContent += "Computer wins this round!\n\n";
        }
    }

    function declareFinalWinner() {
        if (humanScore > computerScore){
            log.textContent += "Game over ! You win. Refresh the page to play again.\n"
        } else if (computerScore > humanScore) {
            log.textContent += "Game over ! Computer wins. Refresh the page to try again.\n"
        } else {
            log.textContent += "Game over ! It's a tie! Refresh the page to try again.\n"
        }
    }

   function playGame(playerChoice) {
      if (round >= 5) return;

      const computerChoice = getComputerChoice();
      const winner = playRound(playerChoice, computerChoice);

      updateScores(winner);
      logRound(playerChoice, computerChoice, winner);

      round++;

      if (round === 5) {
        declareFinalWinner();
      }
    }

    [playRock, playPaper, playScissors].forEach(button => {
      button.addEventListener("click", () => {
        playGame(button.id);
      });
    });

    </script>
  </body>
</html>